import { a as ae } from "./chunk-IHQ7T7HL.js"; import { b as v } from "./chunk-AZWETWKG.js"; import { a as oe } from "./chunk-FZJGQSSN.js"; import "./chunk-OATTNESZ.js"; import { b as q, d as Z, e as J, h as W, i as K, j as Q, k as X, l as Y, m as ee, n as te, p as ie, s as ne, u as re } from "./chunk-46JGFRV7.js"; import { a as R, b as H } from "./chunk-XOLXN3IC.js"; import { Ab as B, Ac as z, Bb as w, Ca as I, Cb as A, Da as F, Db as n, Ea as P, Eb as i, Fa as T, Fb as f, Gb as L, Hb as h, Ib as p, Mb as r, Nb as C, Ob as y, Pb as N, Vb as U, Wb as $, Yb as j, db as V, ha as O, hb as l, na as x, nb as g, sb as S, ta as k, vb as _, yb as D, zb as E, zc as G } from "./chunk-PHL42RAN.js"; var le = (() => { class a { http = x(H); categorias = g([]); loading = g(!1); error = g(null); getCategorias(e = {}) { this.loading.set(!0), this.error.set(null); let t = new R; return e.page && (t = t.set("page", e.page.toString())), e.limit && (t = t.set("limit", e.limit.toString())), e.search && (t = t.set("search", e.search)), e.sortBy && (t = t.set("sortBy", e.sortBy)), e.sortOrder && (t = t.set("sortOrder", e.sortOrder)), this.http.get(`${v.CATEGORIES}`, { params: t }) } createCategoria(e) { return this.loading.set(!0), this.error.set(null), this.http.post(`${v.CATEGORIES}`, e) } getCategoriaById(e) { return this.loading.set(!0), this.error.set(null), this.http.get(`${v.CATEGORIES}/${e}`) } updateCategoria(e, t) { return this.loading.set(!0), this.error.set(null), this.http.put(`${v.CATEGORIES}/${e}`, t) } deleteCategoria(e) { return this.loading.set(!0), this.error.set(null), this.http.delete(`${v.CATEGORIES}/${e}`) } setCategorias(e) { this.categorias.set(e) } setError(e) { this.error.set(e), this.loading.set(!1) } clearLoading() { this.loading.set(!1) } static \u0275fac = function (t) { return new (t || a) }; static \u0275prov = O({ token: a, factory: a.\u0275fac, providedIn: "root" }) } return a })(); var M = (a, d) => d.id; function ce(a, d) { if (a & 1 && (n(0, "option", 12), r(1), i()), a & 2) { let e = d.$implicit; _("value", e.id), l(), N("", e.ciudad, ", ", e.departamento, "") } } function de(a, d) { if (a & 1 && (n(0, "option", 12), r(1), i()), a & 2) { let e = d.$implicit; _("value", e.id), l(), C(e.nombre) } } function pe(a, d) { a & 1 && (n(0, "div", 34), f(1, "div", 36), n(2, "p", 37), r(3, "Cargando propiedades..."), i()()) } function me(a, d) { a & 1 && (n(0, "div", 35)(1, "div", 38), r(2, "\u{1F3E0}"), i(), n(3, "h3", 39), r(4, "No se encontraron propiedades"), i(), n(5, "p", 40), r(6, "Intenta ajustar los filtros de b\xFAsqueda"), i()()) } function ue(a, d) { if (a & 1 && f(0, "img", 45), a & 2) { let e = p().$implicit; _("src", e.images[0], V)("alt", e.nombre) } } function ge(a, d) { a & 1 && (n(0, "div", 46), P(), n(1, "svg", 63), f(2, "path", 64), i()()) } function fe(a, d) { if (a & 1 && (n(0, "div", 42)(1, "div", 44), S(2, ue, 1, 2, "img", 45)(3, ge, 3, 0, "div", 46), n(4, "span", 47), r(5), i()(), n(6, "div", 48)(7, "div", 49)(8, "h3", 50), r(9), i(), n(10, "span", 51), r(11), $(12, "currency"), i()(), n(13, "p", 52), r(14), i(), n(15, "div", 53), P(), n(16, "svg", 54), f(17, "path", 55), i(), r(18), i(), T(), n(19, "div", 56)(20, "div", 57), P(), n(21, "svg", 54), f(22, "path", 58), i(), r(23), i(), T(), n(24, "div", 57), P(), n(25, "svg", 54), f(26, "path", 59), i(), r(27), i()(), T(), n(28, "div", 60)(29, "span", 61), r(30), i(), n(31, "button", 62), r(32, " Ver Detalles "), i()()()()), a & 2) { let e = d.$implicit, t = p(2); l(2), E(e.images && e.images.length > 0 ? 2 : 3), l(2), D(t.getStatusClass(e.estado_publicacion)), l(), y(" ", t.getStatusText(e.estado_publicacion), " "), l(4), C(e.nombre), l(2), y(" ", j(12, 12, e.precio, "COP", "symbol", "1.0-0"), " "), l(3), C(e.descripcion), l(4), N(" ", e.ubicacion.ciudad, ", ", e.ubicacion.departamento, " "), l(5), y(" ", e.cantidad_cuartos, " cuartos "), l(4), y(" ", e.cantidad_banos, " ba\xF1os "), l(3), C(e.categoria.nombre) } } function be(a, d) { if (a & 1) { let e = L(); n(0, "button", 69), h("click", function () { I(e); let s = p().$implicit, m = p(3); return F(m.goToPage(s)) }), r(1), i() } if (a & 2) { let e = p().$implicit, t = p(3); D(e === t.currentPage() ? "bg-primary-600 text-white" : "bg-white text-secondary-700 border border-secondary-300 hover:bg-secondary-50"), l(), y(" ", e, " ") } } function xe(a, d) { if (a & 1 && (n(0, "span", 68), r(1), i()), a & 2) { let e = p().$implicit; l(), C(e) } } function _e(a, d) { if (a & 1 && S(0, be, 2, 3, "button", 67)(1, xe, 2, 1, "span", 68), a & 2) { let e = d.$implicit, t = p(3); E(t.isNumber(e) ? 0 : 1) } } function ye(a, d) { if (a & 1) { let e = L(); n(0, "div", 43)(1, "nav", 65)(2, "button", 66), h("click", function () { I(e); let s = p(2); return F(s.previousPage()) }), r(3, " Anterior "), i(), w(4, _e, 2, 1, null, null, B), n(6, "button", 66), h("click", function () { I(e); let s = p(2); return F(s.nextPage()) }), r(7, " Siguiente "), i()()() } if (a & 2) { let e = p(2); l(2), _("disabled", e.currentPage() === 1), l(2), A(e.getVisiblePages()), l(2), _("disabled", e.currentPage() === e.totalPages()) } } function he(a, d) { if (a & 1 && (n(0, "div", 41), w(1, fe, 33, 17, "div", 42, M), i(), S(3, ye, 8, 2, "div", 43)), a & 2) { let e = p(); l(), A(e.paginatedProperties()), l(2), E(e.totalPages() > 1 ? 3 : -1) } } var Oe = (() => { class a { fb = x(ne); propertyService = x(ae); categoriaService = x(le); ubicacionService = x(oe); properties = g([]); filteredProperties = g([]); categorias = g([]); ubicaciones = g([]); loading = g(!1); currentPage = g(1); itemsPerPage = 9; totalPages = g(1); filterForm = this.fb.group({ ubicacion_id: [""], categoria_id: [""], cantidad_cuartos: [""], cantidad_banos: [""], precio_minimo: [""], precio_maximo: [""], sortBy: ["fecha_publicacion"], sortOrder: ["desc"] }); ngOnInit() { this.loadCategorias(), this.loadUbicaciones(), this.loadProperties(), this.filterForm.valueChanges.subscribe(() => { this.applyFilters() }) } loadCategorias() { this.categorias.set([{ id: 1, nombre: "Casa", descripcion: "Casas residenciales" }, { id: 2, nombre: "Apartamento", descripcion: "Apartamentos urbanos" }, { id: 3, nombre: "Casa de lujo", descripcion: "Propiedades premium" }]) } loadUbicaciones() { this.ubicaciones.set([{ id: 1, ciudad: "Medell\xEDn", departamento: "Antioquia", descripcionCiudad: "Ciudad de la eterna primavera", descripcionDepartamento: "Departamento de Antioquia", fechaCreacion: new Date, activo: !0 }, { id: 2, ciudad: "Bogot\xE1", departamento: "Cundinamarca", descripcionCiudad: "Capital de Colombia", descripcionDepartamento: "Departamento de Cundinamarca", fechaCreacion: new Date, activo: !0 }]) } loadProperties() { this.loading.set(!0), setTimeout(() => { let e = [{ id: 1, nombre: "Casa Moderna en el Norte", descripcion: "Hermosa casa con acabados modernos y amplios espacios", categoria: { id: 1, nombre: "Casa" }, cantidad_cuartos: 4, cantidad_banos: 3, precio: 45e7, ubicacion: { ciudad: "Medell\xEDn", departamento: "Antioquia" }, fecha_publicacion_activa: new Date, estado_publicacion: "PUBLICADA", fecha_publicacion: new Date, vendedor: { id: 1, nombre: "Juan P\xE9rez" }, images: ["/poc-hogar360/assets/images/property-1.jpg"] }, { id: 2, nombre: "Apartamento Centro", descripcion: "Apartamento c\xF3modo en zona c\xE9ntrica con excelente ubicaci\xF3n", categoria: { id: 2, nombre: "Apartamento" }, cantidad_cuartos: 2, cantidad_banos: 2, precio: 28e7, ubicacion: { ciudad: "Bogot\xE1", departamento: "Cundinamarca" }, fecha_publicacion_activa: new Date, estado_publicacion: "PUBLICADA", fecha_publicacion: new Date, vendedor: { id: 2, nombre: "Mar\xEDa Gonz\xE1lez" }, images: ["/poc-hogar360/assets/images/property-2.jpg"] }], t = new Date, s = e.filter(m => m.estado_publicacion === "PUBLICADA" && new Date(m.fecha_publicacion_activa) <= t); this.properties.set(s), this.filteredProperties.set(s), this.updatePagination(), this.loading.set(!1) }, 1e3) } applyFilters() { let e = this.filterForm.value, t = [...this.properties()]; e.ubicacion_id && (t = t.filter(o => o.ubicacion.id === parseInt(e.ubicacion_id))), e.categoria_id && (t = t.filter(o => o.categoria.id === parseInt(e.categoria_id))), e.cantidad_cuartos && (e.cantidad_cuartos === "4" ? t = t.filter(o => o.cantidad_cuartos >= 4) : t = t.filter(o => o.cantidad_cuartos === parseInt(e.cantidad_cuartos))), e.cantidad_banos && (e.cantidad_banos === "3" ? t = t.filter(o => o.cantidad_banos >= 3) : t = t.filter(o => o.cantidad_banos === parseInt(e.cantidad_banos))), e.precio_minimo && (t = t.filter(o => o.precio >= parseInt(e.precio_minimo))), e.precio_maximo && (t = t.filter(o => o.precio <= parseInt(e.precio_maximo))); let s = e.sortBy, m = e.sortOrder; t.sort((o, b) => { let c, u; switch (s) { case "precio": c = o.precio, u = b.precio; break; case "ubicacion": c = o.ubicacion.ciudad, u = b.ubicacion.ciudad; break; case "categoria": c = o.categoria.nombre, u = b.categoria.nombre; break; default: c = new Date(o.fecha_publicacion), u = new Date(b.fecha_publicacion) }return typeof c == "string" ? (c = c.toLowerCase(), u = u.toLowerCase(), m === "asc" ? c.localeCompare(u) : u.localeCompare(c)) : m === "asc" ? c - u : u - c }), this.filteredProperties.set(t), this.currentPage.set(1), this.updatePagination() } clearFilters() { this.filterForm.reset({ sortBy: "fecha_publicacion", sortOrder: "desc" }), this.applyFilters() } updatePagination() { let e = Math.ceil(this.filteredProperties().length / this.itemsPerPage); this.totalPages.set(Math.max(1, e)) } paginatedProperties() { let e = (this.currentPage() - 1) * this.itemsPerPage, t = e + this.itemsPerPage; return this.filteredProperties().slice(e, t) } getVisiblePages() { let e = this.currentPage(), t = this.totalPages(), s = 2; if (t <= 7) return Array.from({ length: t }, (c, u) => u + 1); let m = [], o = []; for (let c = Math.max(2, e - s); c <= Math.min(t - 1, e + s); c++)m.push(c); e - s > 2 ? o.push(1, "...") : o.push(1), o.push(...m), e + s < t - 1 ? o.push("...", t) : t > 1 && o.push(t); let b = new Set; return o.filter(c => b.has(c) ? !1 : (b.add(c), !0)) } goToPage(e) { typeof e == "number" && e >= 1 && e <= this.totalPages() && this.currentPage.set(e) } previousPage() { this.currentPage() > 1 && this.currentPage.set(this.currentPage() - 1) } nextPage() { this.currentPage() < this.totalPages() && this.currentPage.set(this.currentPage() + 1) } getStatusClass(e) { switch (e) { case "PUBLICADA": return "bg-green-100 text-green-800"; case "PUBLICACION_PAUSADA": return "bg-yellow-100 text-yellow-800"; case "TRANSACCION_CURSO": return "bg-blue-100 text-blue-800"; case "TRANSACCION_FINALIZADA": return "bg-gray-100 text-gray-800"; default: return "bg-gray-100 text-gray-800" } } getStatusText(e) { switch (e) { case "PUBLICADA": return "Disponible"; case "PUBLICACION_PAUSADA": return "Pausada"; case "TRANSACCION_CURSO": return "En Transacci\xF3n"; case "TRANSACCION_FINALIZADA": return "Vendida"; default: return e } } isNumber(e) { return typeof e == "number" } static \u0275fac = function (t) { return new (t || a) }; static \u0275cmp = k({ type: a, selectors: [["app-property-listing"]], standalone: !0, features: [U], decls: 92, vars: 3, consts: [[1, "property-listing-page"], [1, "flex", "justify-between", "items-center", "mb-6"], [1, "text-2xl", "font-bold", "text-secondary-900"], [1, "flex", "items-center", "space-x-2"], [1, "text-sm", "text-secondary-600"], [1, "bg-white", "rounded-lg", "shadow-md", "p-6", "mb-6"], [1, "text-lg", "font-semibold", "text-secondary-900", "mb-4"], [1, "space-y-4", 3, "formGroup"], [1, "grid", "grid-cols-1", "md:grid-cols-3", "gap-4"], [1, "block", "text-sm", "font-medium", "text-secondary-700", "mb-2"], ["formControlName", "ubicacion_id", 1, "w-full", "px-3", "py-2", "border", "border-secondary-300", "rounded-lg", "focus:outline-none", "focus:ring-2", "focus:ring-primary-500", "focus:border-primary-500"], ["value", ""], [3, "value"], ["formControlName", "categoria_id", 1, "w-full", "px-3", "py-2", "border", "border-secondary-300", "rounded-lg", "focus:outline-none", "focus:ring-2", "focus:ring-primary-500", "focus:border-primary-500"], ["formControlName", "cantidad_cuartos", 1, "w-full", "px-3", "py-2", "border", "border-secondary-300", "rounded-lg", "focus:outline-none", "focus:ring-2", "focus:ring-primary-500", "focus:border-primary-500"], ["value", "1"], ["value", "2"], ["value", "3"], ["value", "4"], ["formControlName", "cantidad_banos", 1, "w-full", "px-3", "py-2", "border", "border-secondary-300", "rounded-lg", "focus:outline-none", "focus:ring-2", "focus:ring-primary-500", "focus:border-primary-500"], ["type", "number", "formControlName", "precio_minimo", "placeholder", "100,000,000", "min", "0", 1, "w-full", "px-3", "py-2", "border", "border-secondary-300", "rounded-lg", "focus:outline-none", "focus:ring-2", "focus:ring-primary-500", "focus:border-primary-500"], ["type", "number", "formControlName", "precio_maximo", "placeholder", "500,000,000", "min", "0", 1, "w-full", "px-3", "py-2", "border", "border-secondary-300", "rounded-lg", "focus:outline-none", "focus:ring-2", "focus:ring-primary-500", "focus:border-primary-500"], [1, "grid", "grid-cols-1", "md:grid-cols-2", "gap-4"], ["formControlName", "sortBy", 1, "w-full", "px-3", "py-2", "border", "border-secondary-300", "rounded-lg", "focus:outline-none", "focus:ring-2", "focus:ring-primary-500", "focus:border-primary-500"], ["value", "fecha_publicacion"], ["value", "precio"], ["value", "ubicacion"], ["value", "categoria"], ["formControlName", "sortOrder", 1, "w-full", "px-3", "py-2", "border", "border-secondary-300", "rounded-lg", "focus:outline-none", "focus:ring-2", "focus:ring-primary-500", "focus:border-primary-500"], ["value", "desc"], ["value", "asc"], [1, "flex", "justify-end", "space-x-3"], ["type", "button", 1, "px-4", "py-2", "border", "border-secondary-300", "text-secondary-700", "rounded-lg", "hover:bg-secondary-50", "transition-colors", 3, "click"], ["type", "button", 1, "px-4", "py-2", "bg-primary-600", "text-white", "rounded-lg", "hover:bg-primary-700", "transition-colors", 3, "click"], [1, "text-center", "py-8"], [1, "bg-white", "rounded-lg", "shadow-md", "p-8", "text-center"], [1, "inline-block", "animate-spin", "rounded-full", "h-8", "w-8", "border-b-2", "border-primary-600"], [1, "mt-2", "text-secondary-600"], [1, "text-4xl", "mb-4"], [1, "text-lg", "font-medium", "text-secondary-900", "mb-2"], [1, "text-secondary-600"], [1, "grid", "grid-cols-1", "md:grid-cols-2", "lg:grid-cols-3", "gap-6"], [1, "bg-white", "rounded-lg", "shadow-md", "overflow-hidden", "hover:shadow-lg", "transition-shadow"], [1, "mt-8", "flex", "justify-center"], [1, "h-48", "bg-gray-200", "relative"], [1, "w-full", "h-full", "object-cover", 3, "src", "alt"], [1, "flex", "items-center", "justify-center", "h-full", "text-secondary-400"], [1, "absolute", "top-2", "right-2", "px-2", "py-1", "text-xs", "font-medium", "rounded-full"], [1, "p-4"], [1, "flex", "justify-between", "items-start", "mb-2"], [1, "text-lg", "font-semibold", "text-secondary-900", "truncate"], [1, "text-lg", "font-bold", "text-primary-600"], [1, "text-sm", "text-secondary-600", "mb-3", "line-clamp-2"], [1, "flex", "items-center", "text-sm", "text-secondary-600", "mb-3"], ["fill", "currentColor", "viewBox", "0 0 20 20", 1, "w-4", "h-4", "mr-1"], ["fill-rule", "evenodd", "d", "M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z", "clip-rule", "evenodd"], [1, "flex", "items-center", "justify-between", "text-sm", "text-secondary-600", "mb-3"], [1, "flex", "items-center"], ["d", "M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"], ["d", "M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"], [1, "flex", "items-center", "justify-between"], [1, "text-xs", "text-secondary-500"], [1, "px-3", "py-1", "bg-primary-600", "text-white", "text-sm", "rounded", "hover:bg-primary-700", "transition-colors"], ["fill", "currentColor", "viewBox", "0 0 20 20", 1, "w-12", "h-12"], ["d", "M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z"], [1, "flex", "space-x-2"], [1, "px-3", "py-2", "border", "border-secondary-300", "text-secondary-700", "rounded-lg", "hover:bg-secondary-50", "disabled:opacity-50", "disabled:cursor-not-allowed", 3, "click", "disabled"], [1, "px-3", "py-2", "rounded-lg", "transition-colors", 3, "class"], [1, "px-3", "py-2", "text-secondary-400"], [1, "px-3", "py-2", "rounded-lg", "transition-colors", 3, "click"]], template: function (t, s) { t & 1 && (n(0, "div", 0)(1, "div", 1)(2, "h1", 2), r(3, "Listado de Propiedades"), i(), n(4, "div", 3)(5, "span", 4), r(6), i()()(), n(7, "div", 5)(8, "h2", 6), r(9, "Filtros de B\xFAsqueda"), i(), n(10, "form", 7)(11, "div", 8)(12, "div")(13, "label", 9), r(14, "Ubicaci\xF3n"), i(), n(15, "select", 10)(16, "option", 11), r(17, "Todas las ubicaciones"), i(), w(18, ce, 2, 3, "option", 12, M), i()(), n(20, "div")(21, "label", 9), r(22, "Categor\xEDa"), i(), n(23, "select", 13)(24, "option", 11), r(25, "Todas las categor\xEDas"), i(), w(26, de, 2, 2, "option", 12, M), i()(), n(28, "div")(29, "label", 9), r(30, "N\xFAmero de Cuartos"), i(), n(31, "select", 14)(32, "option", 11), r(33, "Cualquier cantidad"), i(), n(34, "option", 15), r(35, "1 cuarto"), i(), n(36, "option", 16), r(37, "2 cuartos"), i(), n(38, "option", 17), r(39, "3 cuartos"), i(), n(40, "option", 18), r(41, "4+ cuartos"), i()()()(), n(42, "div", 8)(43, "div")(44, "label", 9), r(45, "N\xFAmero de Ba\xF1os"), i(), n(46, "select", 19)(47, "option", 11), r(48, "Cualquier cantidad"), i(), n(49, "option", 15), r(50, "1 ba\xF1o"), i(), n(51, "option", 16), r(52, "2 ba\xF1os"), i(), n(53, "option", 17), r(54, "3+ ba\xF1os"), i()()(), n(55, "div")(56, "label", 9), r(57, "Precio M\xEDnimo"), i(), f(58, "input", 20), i(), n(59, "div")(60, "label", 9), r(61, "Precio M\xE1ximo"), i(), f(62, "input", 21), i()(), n(63, "div", 22)(64, "div")(65, "label", 9), r(66, "Ordenar por"), i(), n(67, "select", 23)(68, "option", 24), r(69, "Fecha de Publicaci\xF3n"), i(), n(70, "option", 25), r(71, "Precio"), i(), n(72, "option", 26), r(73, "Ubicaci\xF3n"), i(), n(74, "option", 27), r(75, "Categor\xEDa"), i()()(), n(76, "div")(77, "label", 9), r(78, "Orden"), i(), n(79, "select", 28)(80, "option", 29), r(81, "Descendente"), i(), n(82, "option", 30), r(83, "Ascendente"), i()()()(), n(84, "div", 31)(85, "button", 32), h("click", function () { return s.clearFilters() }), r(86, " Limpiar Filtros "), i(), n(87, "button", 33), h("click", function () { return s.applyFilters() }), r(88, " Aplicar Filtros "), i()()()(), S(89, pe, 4, 0, "div", 34)(90, me, 7, 0, "div", 35)(91, he, 4, 1), i()), t & 2 && (l(6), y("", s.filteredProperties().length, " propiedades encontradas"), l(4), _("formGroup", s.filterForm), l(8), A(s.ubicaciones()), l(8), A(s.categorias()), l(63), E(s.loading() ? 89 : s.filteredProperties().length === 0 ? 90 : 91)) }, dependencies: [z, G, re, W, ee, te, q, K, Y, Z, J, ie, Q, X], styles: [".property-listing-page[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;max-width:80rem;padding:1.5rem}.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}"] }) } return a })(); export { Oe as PropertyListingComponent };
